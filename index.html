<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>NKUST 新生刊｜雙頁翻閱</title>
<style>
  :root{
    --fg:#1c2430;
    --gap: clamp(8px, 1vw, 16px);      /* 兩頁間距：改小更靠近 */
    --paper:#fffaf4;                   /* 雙頁底色 */
    --edge:rgba(0,0,0,.06);
    /* 點點紋理可調整 */
    --dot-color: rgba(120, 90, 60, .10);
    --dot-size: 1.2px;                 /* 點半徑 */
    --dot-space: 12px;                 /* 點間距 */
  }

  html,body{height:100%}
  body{
    margin:0; color:var(--fg);
    font:16px/1.45 system-ui,"Noto Sans TC","PingFang TC","Microsoft JhengHei",sans-serif;
    /* 微暖色背景（米白→淡橘） */
    background:
      radial-gradient(1100px 600px at 50% 20%, #fdf7f0, #f5ece1 65%),
      linear-gradient(180deg, #f5ece1, #f0e4d7);
  }
  /* 點點紋理：覆蓋在暖色漸層上，低不透明度 */
  body::before{
    content:""; position:fixed; inset:0; pointer-events:none; z-index:0; opacity:.55;
    background-image: radial-gradient(var(--dot-color) var(--dot-size), transparent calc(var(--dot-size) + 0.01px));
    background-size: var(--dot-space) var(--dot-space);
  }

  #app{display:flex; flex-direction:column; height:100%; position:relative; z-index:1}
  header{
    display:flex; align-items:center; gap:.75rem; padding:.6rem 1rem;
    background:rgba(255,255,255,.85); backdrop-filter: blur(8px);
    box-shadow:0 1px 0 rgba(0,0,0,.05);
  }
  .grow{flex:1}
  .btn{
    appearance:none; border:1px solid rgba(0,0,0,.08);
    border-radius:.55rem; padding:.5rem .85rem; background:#ffffff; color:#0f172a;
    font-weight:700; cursor:pointer; box-shadow:0 1px 2px rgba(0,0,0,.04);
  }
  .btn[disabled]{opacity:.45; cursor:not-allowed}

  /* Viewer：永遠雙頁、置中、盡量吃滿畫面 */
  #viewer{
    flex:1; position:relative; overflow:hidden;
    display:flex; align-items:center; justify-content:center;
  }
  .spread{
    display:grid; grid-template-columns:1fr 1fr; gap:var(--gap);
    align-items:center; justify-items:center;
    height:calc(100vh - 110px);                 /* 扣掉工具列高度 */
    width:min(98vw, 1900px);
    padding:clamp(8px, 1vw, 16px);
  }
  .page{
    height:100%;
    background:var(--paper);
    border-radius:.8rem; overflow:hidden;
    box-shadow:0 10px 28px rgba(0,0,0,.12), inset 0 1px 0 var(--edge);
    display:flex; align-items:center; justify-content:center;
  }
  .page img{
    max-height:100%;
    max-width:100%;
    object-fit:contain;
    user-select:none; -webkit-user-drag:none; pointer-events:none; /* 圖片不可移動 */
    display:block;
  }
  .pg{
    position:absolute; right:.6rem; bottom:.5rem; font-size:.8rem; color:#374151;
    background:rgba(255,255,255,.8); padding:.15rem .45rem; border-radius:.4rem;
    box-shadow:0 1px 2px rgba(0,0,0,.06)
  }

  /* 中央書脊（視覺聚焦） */
  #viewer::after{
    content:""; position:absolute; top:calc(60px); bottom:12px; width:2px; left:50%;
    transform:translateX(-50%);
    background:linear-gradient(180deg, rgba(0,0,0,.05), rgba(0,0,0,.02) 40%, rgba(0,0,0,.05));
    border-radius:2px; pointer-events:none;
  }
</style>
</head>
<body>
<div id="app">
  <header>
    <button class="btn" id="prev">⬅︎ 上一面</button>
    <button class="btn" id="next">下一面 ➡︎</button>
    <div class="grow"></div>
    <div>第 <b id="cur">1–2</b> / <b id="total">—</b> 頁</div>
  </header>

  <main id="viewer" aria-label="翻頁區">
    <div class="spread" id="spread"></div>
  </main>
</div>

<script>
  /* 第一面：左=封面、右=目錄（目錄為正向，不旋轉） */
  const PAGES = [
    { src:"pages/00-封面_NKUST_新生刊.jpg", alt:"封面" },
    { src:"pages/10-SA大哉問_目錄封面.jpg", alt:"目錄" },

    { src:"pages/01-學籍資料.jpg", alt:"新生必讀：學籍資料填寫 01" },
    { src:"pages/02-學雜費繳納.jpg", alt:"學雜費繳納 02" },
    { src:"pages/03-宿舍與網路.jpg", alt:"宿舍相關與網路 03" },
    { src:"pages/04-新生重要日程.jpg", alt:"新生重要日程 04" },
    { src:"pages/05-屬性社團_介紹.jpg", alt:"屬性社團介紹 05" },
    { src:"pages/06-社團嘉年華.jpg", alt:"社團嘉年華 06" },
    { src:"pages/07-學生會大哉問-會費QA.jpg", alt:"學生會大哉問：會費 Q&A 07" },
    { src:"pages/08-繳交學生會費_回饋.jpg", alt:"繳交學生會費回饋 08" },
    { src:"pages/09-學生會_組織架構.jpg", alt:"學生會組織架構 09" },
    { src:"pages/10-各校區學生會辦公資訊.jpg", alt:"各校區學生會辦公資訊 10" },
    { src:"pages/11-學生會議會_評議會.jpg", alt:"學生議會與學生評議會 11" },
    { src:"pages/12-行政中心介紹.jpg", alt:"行政中心介紹 12" },
    { src:"pages/13-歷年活動.jpg", alt:"歷年活動 13" },
    { src:"pages/14-奶茶節_演唱會_海洋祭_評鑑.jpg", alt:"活動：奶茶節／演唱會／海洋祭／評鑑 14" },
    { src:"pages/15-SA_QR_與常用連結.jpg", alt:"SA & QR Code／常用連結 15" },
    { src:"pages/16-封底_NKUST_Student_Association.jpg", alt:"封底 16" }
  ];

  const spread = document.getElementById('spread');
  const curEl  = document.getElementById('cur');
  const totalEl= document.getElementById('total');
  const prevBtn= document.getElementById('prev');
  const nextBtn= document.getElementById('next');

  totalEl.textContent = PAGES.length;

  // 左頁索引（偶數）；一次翻兩頁；僅按鈕/鍵盤翻頁
  let index = 0;

  function clamp(){
    if(index % 2 === 1) index--;
    index = Math.max(0, Math.min(index, Math.max(0, PAGES.length - 2)));
  }

  function render(){
    clamp();
    spread.innerHTML = "";

    const pair = [index, index+1].filter(i => i < PAGES.length);
    pair.forEach(i=>{
      const fig = document.createElement('figure');
      fig.className = 'page';

      const img = document.createElement('img');
      img.src = PAGES[i].src;
      img.alt = PAGES[i].alt || `第 ${i+1} 頁`;
      fig.appendChild(img);

      const cap = document.createElement('figcaption');
      cap.className = 'pg';
      cap.textContent = String(i+1).padStart(2,'0');
      fig.appendChild(cap);

      spread.appendChild(fig);

      // 預載下兩頁
      if(i+2 < PAGES.length){ const pre1 = new Image(); pre1.src = PAGES[i+2].src; }
      if(i+3 < PAGES.length){ const pre2 = new Image(); pre2.src = PAGES[i+3].src; }
    });

    const left = index + 1;
    const right = Math.min(PAGES.length, index + 2);
    curEl.textContent = `${left}–${right}`;

    prevBtn.disabled = (index === 0);
    nextBtn.disabled = (index >= PAGES.length - 2);
  }

  function prev(){ if(index > 0){ index -= 2; render(); } }
  function next(){ if(index < PAGES.length - 2){ index += 2; render(); } }

  prevBtn.addEventListener('click', prev);
  nextBtn.addEventListener('click', next);

  // 鍵盤左右鍵翻頁
  window.addEventListener('keydown', (e)=>{
    if(e.key === 'ArrowLeft') prev();
    if(e.key === 'ArrowRight' || e.key === ' ') next();
  });

  render();
</script>
</body>
</html>
